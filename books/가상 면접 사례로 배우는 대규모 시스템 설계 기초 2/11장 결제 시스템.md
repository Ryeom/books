이 설계의 핵심 목표는 일간 천만 개 수준의 지표 데이터와 막대한 쓰기 부하를 안정적으로 처리하며, 낮은 지연 시간(Latency)으로 인프라의 가용성과 안정성을 확보하는 것이다. 이 시스템은 쓰기 집약적(Write-Heavy) 특성과 시계열 데이터의 특수성을 고려한 최적화된 파이프라인 구조를 가짐.

### 1. 핵심 당면 과제

- 대규모 쓰기 부하 및 안정성: 매일 발생하는 막대한 지표 데이터를 데이터 손실 없이 처리하는 것이 필수적임.
- 저장 및 검색 비효율성: 시계열 데이터의 특성상 범용 데이터베이스에 저장할 경우 쿼리 성능이 저하되고, 1년이라는 장기 보관 요구사항을 충족하기 어려움.
- 경고 피로도: 수많은 지표 중 실제 이상 징후를 정확히 감지하고, 불필요한 알림(노이즈)을 걸러내 엔지니어의 경고 피로도를 낮추는 것이 중요함.

### 2. 핵심 해결책: TSDB, Kafka 및 최적화된 파이프라인

문제 해결을 위해 시계열 데이터베이스(TSDB)를 중심으로 한 안정적인 전송 파이프라인을 구축하는 것이 핵심 설계 방안이다.

|영역|핵심 기술 및 결정|해결 근거 및 비즈니스 효과|
|---|---|---|
|데이터 저장소|시계열 데이터베이스(TSDB) 채택 (예: Prometheus, InfluxDB).|TSDB는 시계열 데이터의 압축, 인코딩, 레이블 기반 질의에 최적화되어 있어, 저장 효율성과 실시간 분석 속도를 극대화한다.|
|전송 안정성|분산 메시지 큐 (Kafka)를 파이프라인 중앙에 배치함.|지표 수집기와 TSDB 간의 결합도 완화 및 TSDB 장애 시 데이터 손실을 방지하여 경보 시스템의 안정성을 보장함.|
|저장 용량 최적화|다운샘플링(Downsampling) 및 데이터 인코딩 기법 적용.|장기 보관을 위해 오래된 데이터의 해상도를 단계적으로 낮추어 보관함으로써 저장 비용을 절감하고, 데이터의 유효성을 유지함.|
|데이터 수집|풀 모델 (Prometheus)과 푸시 모델을 선택적으로 활용하며, 안정 해시 링을 사용해 부하 분산.|풀 모델은 서버 상태 진단에 유리하며, 해시 링으로 수집 서버 간의 중복 수집 및 부하 불균형을 방지함.|
|경보 시스템|경보 관리자(Alert Manager)를 중심으로 구축하고, 경보 병합/중복 제거 기능을 내재화함.|경보의 논리적 처리를 통해 경고 노이즈를 감소시켜 엔지니어가 중요한 이슈에 집중할 수 있도록 지원함.|

---

## 주요 용어 정리

- 시계열 데이터 (Time-Series Data, TSDB): 타임스탬프와 함께 기록되는 값의 집합이다. 시간의 흐름에 따른 데이터의 패턴 분석에 최적화된 자료형.
- 다운샘플링 (Downsampling): 데이터의 해상도(샘플링 간격)를 낮춰 저장하는 작업이다. 장기 보관 시 저장 용량을 절감하는 핵심 기법.
- 카프카 (Kafka): 고성능 분산 메시지 큐 시스템. 지표 수집 파이프라인에서 데이터의 안정적인 전송과 규모 확장을 담당.
- 풀 모델 (Pull Model): 지표 수집기가 모니터링 대상 서버에 접속하여 데이터를 능동적으로 가져오는 방식이다 (예: Prometheus).
- 경보 관리자 (Alert Manager): 경보 규칙을 실행하고, 발생한 경보 이벤트를 병합 및 중복 제거하여 최종 알림을 전달하는 시스템 구성 요소.
- 레이블 (Label): 지표 데이터에 붙는 `<키:값>` 쌍의 메타데이터이다. 지표 데이터를 필터링하고 집계하는 데 사용되는 핵심 수단.
- 안정 해시 링 (Consistent Hash Ring): 분산 시스템에서 서버 클러스터 간에 작업을 균등하게 분산하고, 노드 추가/제거 시 데이터 재분배를 최소화하여 안정성을 유지하는 해시 알고리즘.