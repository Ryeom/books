구글 맵스 시스템 설계의 핵심 목표는 **10억 DAU 규모의 사용자에게 정확하고 부드러운 위치/경로 안내 및 지도 표시 서비스를 제공하는 것**에 있음. 이는 막대한 데이터 볼륨(100PB 이상)과 초당 수백만 건의 쓰기 요청을 처리하면서도, 모바일 클라이언트의 배터리 및 데이터 사용량을 최소화하는 것이 가장 큰 비즈니스 가치이자 기술적 난제에 대한 해결책임.

### 1. 위치 서비스 (Location Service)

사용자의 위치 갱신 데이터를 수집하고 전파하는 시스템임.

- **기능 및 기술:** 클라이언트가 15초마다 일괄 요청(Batch Request) 형태로 전송하는 위치 정보를 저장함. 높은 쓰기 부하 처리를 위해 **카산드라(Cassandra)** 데이터베이스를 채택함.
- **비즈니스 가치:** 수집된 위치 데이터는 단순 기록을 넘어, **카프카(Kafka)** 메시지 큐를 통해 실시간 교통 상황 모니터링, 도로망 데이터 개선, 그리고 **적응형 ETA** 산출의 핵심 입력 데이터로 활용됨.

### 2. 경로 안내 서비스 (Navigation Service)

출발지에서 목적지까지 최적의 경로를 계산하고 실시간 교통 상황을 반영하여 ETA를 제공하는 서비스이다.
- **경로 탐색 효율화:** 전 세계 도로망 데이터를 교차로를 **노드**로, 도로를 **선(Edge)**으로 하는 그래프 형태로 분할하여 **경로 안내 타일**로 관리함. 이는 거대한 그래프를 효율적으로 탐색하고 메모리 사용량을 낮추는 핵심 방안임.
- **경로 계산 과정:** 주소를 좌표로 변환하는 **지오코딩**, 도로망 타일에 대해 **A*** 알고리즘을 실행하여 최단 경로 목록을 생성하는 **최단 경로 서비스**, 그리고 기계 학습을 통해 실제 교통 상황을 반영한 도착 시간을 산출하는 **ETA 서비스**로 구성됨.
- **실시간 대응:** 클라이언트와 서버 간에 **웹소켓(WebSocket)**을 통한 양방향 통신을 설정하여, 교통 상황 변화가 감지될 경우 ETA 변경이나 경로 재탐색이 필요한 정보를 실시간으로 사용자에게 안정적으로 전송함.

### 3. 지도 표시 (Map Rendering)

수백 PB 규모의 지도 데이터를 모바일 환경에 가장 효율적으로 표시하는 서비스임.
- **전송 최적화:** 지도 전체를 작은 사각형 이미지 조각인 **지도 타일**로 미리 만들어 둠. 이 타일들은 **CDN(Content Delivery Network)**을 통해 사용자에게 가장 가까운 지점에서 전송되어 전송 속도를 극대화함.
- **공간 관리:** 지도 타일의 지리적 영역은 **지오해싱(Geohashing)**과 같은 공간 분할 기법으로 관리됨. 클라이언트가 현재 위치와 확대 수준에 따라 필요한 타일의 URL을 직접 계산하거나 별도의 서비스로부터 받아 CDN에서 다운로드하는 구조임.
- **성능 개선:** 이미지 기반 타일 대신, 지도 요소를 수학적 정보(벡터)로 압축한 **벡터 타일**을 클라이언트에 전송하는 방안을 고려함. 이는 네트워크 대역폭을 절감하고 지도 확대/축소 시 매끄러운 사용자 경험을 제공함.
---

## 주요 용어 정리

- **지오해싱(Geohashing):** 지리적 위치(위경도)를 영문자와 숫자의 짧은 문자열로 인코딩하는 체계임. 공간을 재귀적으로 분할하여 위치를 효율적으로 색인하고 관리하는 데 사용됨.
- **지도 타일(Map Tile):** 전체 지도를 256x256 픽셀과 같은 작은 이미지 조각으로 분할한 것임. 클라이언트는 필요한 영역의 타일만 CDN을 통해 다운로드하여 지도를 표시함.
- **경로 안내 타일(Routing Tile):** 도로망 그래프(교차로=노드, 도로=엣지)를 관리 가능한 크기로 분할하여 생성한 이진 파일임. 경로 탐색 알고리즘의 입력 데이터로 사용됨.
- **지오코딩(Geocoding):** 사람이 읽을 수 있는 주소('1600 Amphitheatre Parkway')를 지리적 좌표(위도/경도)로 변환하는 프로세스임.
- **적응형 ETA(Adaptive ETA):** 실시간 교통 상황 변화를 반영하여 이동 시간을 예측하고 도착 예정 시간(ETA)을 동적으로 갱신하는 기능임. 웹소켓을 통해 클라이언트에게 전달됨.
- **벡터 타일(Vector Tile):** 지도 요소를 이미지(PNG)가 아닌 경로(Path)나 다각형(Polygon) 등의 수학적 데이터(벡터)로 압축하여 전송하는 방식임. 데이터 용량을 줄이고 클라이언트에서 고해상도로 지도를 표시할 수 있음.
- **카산드라(Cassandra):** 분산 환경에서 높은 가용성을 보장하며 대규모 쓰기 연산 처리에 최적화된 NoSQL 데이터베이스임. 위치 정보처럼 막대한 쓰기 부하를 처리하는 데 적합함.