## 6.1 관찰 가능성
- **정의**: 외부 신호로 시스템 상태를 추론하는 능력.
- **중요성**: 효율성 요구사항을 평가하고 병목을 발견하는 데 필수.
- **신호 유형**: 로그, 트레이스, 메트릭, 프로파일링.

### 관찰 가능성 신호
- **메트릭**: 일정 시간 간격의 수치 데이터 (e.g., 평균 레이턴시).
- **로그**: 시간 순서대로 기록된 이벤트 데이터.
- **트레이스**: 분산 시스템의 요청 흐름 추적.
- **프로파일링**: 코드 실행 중 상세 리소스 사용 정보 제공.

## 6.2 예시: 레이턴시 계측
### 레이턴시 계측 신호별 적용
1. **로깅**:
   - Go의 `time` 패키지를 활용해 간단히 측정 가능.
   - 한계: 구조화가 부족하고 대규모 분석에 부적합.
2. **트레이싱**:
   - 요청 흐름을 시각화하고 병목 구간 식별.
   - OpenTelemetry 등 라이브러리를 통해 구현.
   - 한계: 높은 비용, 코드 복잡성 증가.
3. **메트릭**:
   - 효율성과 비용 측면에서 가장 적합.
   - Prometheus의 히스토그램 활용 가능.
   - 장점: 집계된 데이터 제공, 자동화 용이.

## 6.3 효율성 메트릭의 의미 체계
### 레이턴시
- **정의**: 작업 시작부터 종료까지 소요 시간.
- **측정 단위**: 일반적으로 초 단위.
- **세분성**:
  - 클라이언트-서버 간 레이턴시, 함수 호출 단위 등 다양한 수준.
  - Prometheus 히스토그램으로 백분위수(중앙값, 90% 등) 계산 가능.

### CPU 사용량
- **주요 메트릭**:
  - CPU 시간, 주기, 명령어 수.
  - 사용자/시스템 시간 구분.
- **포화 상태 인지**:
  - CPU 사용량 그래프를 통해 확인.
  - 포화 상태 시 동시성 제한, 최적화 필요.

### 메모리 사용량
1. **Go 런타임 힙 통계**:
   - `runtime/metrics` 패키지를 통해 힙 할당 바이트 측정.
2. **운영체제 메모리 통계**:
   - VSS, RSS, PSS, WSS 등으로 분석.
   - RSS는 RAM 상주 메모리량, PSS는 공유 메모리의 기여도.

## 6.4 마치며
- 관찰 가능성은 효율성 향상을 위한 핵심 도구.
- 메트릭, 트레이스, 로그 등의 신호를 활용해 문제를 식별하고 개선.
- 실용적인 시스템은 신호를 혼합해 최적의 관찰 가능성을 달성해야 함.

---

### TIP
- **"측정하지 않으면 개선할 수 없다"**: 데이터 기반 결정 필수.
- 다양한 신호와 도구를 조합해 효율성 최적화 진행.
