# ■ 13-1 교착 상태란?
## □ 식사하는 철학자 문제 (dining philosophers problem)
동그란 원탁에 앉은 다섯명의 철학자들, 철학자들 앞의 식사는 두개의 포크로 먹을 수 있는 음식임.

  

1. 한 두명의 철학자가 식사할때에는 문제가 없음.
2. 모든 철학자가 동시에 포크를 집어 식사 불가.
3. 모든 철학자는 다른 철학자가 포크를 놓을때까지 대기.

▸ **교착상태 (deadlock)** : 일어나지 않을 사건을 기다리며 진행이 멈춰버리는 현상.
*프로세스는 상대방이 가진 자원을 기다리기만 하다가 결국 실행 한번을 하지 못하는* 상황이 발생.

▸ **자원 할당 그래프 (resource-allocation graph)** : 어떤 프로세스가 어떤 자원을 사용하고 있고, 어떤 자원을 기다리는 지를 표현하는 간단한 그래프. 교착상태를 표현 가능.

1. 프로세스는 원으로 자원의 종류는 사각형으로 표현
2. 사용 할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현
3. 프로세스가 어떤 자원을 할당받아 사용중이라면 자원에서 프로세스를 향해 화살표 표시
4. 프로세스가 어떤 자원을 기다리고 있다면 프로세스에서 자원으로 화살표를 표시


## □ 교착 상태 발생 조건
  1. 상호배제(mutual exclusion) : 한번에 하나의 프로세스만 이용가능함.
  2. 점유와 대기(hold and wait) : 자원을 할당받은 상태에서 다른 자원을 할당받기를 기다리는 상태
  3. 비선점(nonpreemptive) : 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못함.
  4. 원형대기(circular wait) : 자원 할당 그래프가 원의 형태로 그려지면 교착상태 발생.

# ■ 13-2 교착 상태 해결 방법
## □ 교착 상태 예방
  1. 상호배제 : X
  2. 점유와 대기 : 자원을 모두 할당하거나 아예할당하지 않거나 / 자원활용률 저하, 기아현상 우려
  3. 비선점 : 범용성 ⇣
  4. 원형대기 : 자원에 번호를 붙이고 오름차순으로 자원 할당 시 원형 대기는 발생하지 않음. / 시스템 내 존재하는 수많은 자원에 번호를 붙이는 일은 힘듦. 특정자원의 활용율 저하.
`예방은 다양한 부작용이 따름.`

## □ 교착 상태 회피
*교착상태가 발생하지 않을 정도로만 조심해서 자원을 할당하는 방식*

- **안전상태 (safe state)** 
  교착상태가 발생하지 않고 모든 프로세스가 정상적으로 자원을 할당받고 종료될 수 있는 상태
- **불안전상태 (unsafe state)**
  교착상태가 발생할수도 있는 상황, 안전 순서열이 없는 상황
- **안전 순서열 (safe sequence)**
  교착상태없이 안전하게 프로세스들에 자원을 할당 받을 수있는 순서를 의미

## □ 교착 상태 검출 후 회복 : 교착 상태 발생을 인정하고 사후에 조치
1. **선점을 통한 회복** : 교착상태가 해결될때까지 한 프로세스 씩 자원을 몰아주는 방식.
2. 프로세스 **강제종료**를 통한 회복
3. 타조 알고리즘 (ostrich algorithm : [[우리의 인지 편향들]] #타조효과 참고) : 교착상태 무시
