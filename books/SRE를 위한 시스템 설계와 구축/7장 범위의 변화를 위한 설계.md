```ad-hint
변화하는 보안 요구사항에 적응하기 위해 설계와 아키텍처를 최적화하여 지속적인 신뢰성과 유연성을 보장하는 방법
```
## 7.1 보안과 관련된 변화의 종류
보안을 위한 다양한 변화 유형을 소개합니다.
- **예시**: 새로 발견된 취약점, 보안 사고 대응, 규제 요구사항 준수 등.

---

## 7.2 변화의 설계
변화는 점진적이고, 문서화되며, 테스트와 검증이 필요합니다.
- **핵심 특성**:
  - 변화는 **작게** 나누고 격리하며, 단계적으로 롤아웃.
  - **테스트와 검증**: 프로덕션 이전에 확인.
  - **문서화**: 변화의 이유, 방법, 관련 시스템 및 팀 기록.

---

## 7.3 보다 쉬운 변화를 위한 아키텍처 결정사항
변화를 수용하기 위한 설계 원칙을 소개합니다.
- **디펜던시 최신화**: 외부 라이브러리와 소프트웨어를 최신으로 유지.
- **컨테이너 활용**:
  - ⭐️ **[그림 7-1]**: 컨테이너 재배포 전략과 블루-그린 배포 방식.
- **마이크로서비스 활용**: 각 기능을 독립적으로 관리하여 유연성 확보.
  - **사례**: 구글의 프런트엔드 설계(GFE).
  - ### **7.3.4 사례: 구글의 프런트엔드 설계**
#### 구글 프런트엔드 설계의 특징
- 구글은 **프런트엔드와 백엔드**를 분리한 **마이크로서비스 아키텍처**를 활용하여 **회복성**과 **심층 방어**를 제공.
- **구글 프런트엔드(GFE)**는 구글의 대부분 서비스를 위한 **프런트엔드 계층**을 제공.
  - **인터넷에 직접 노출되지 않음**으로 보안성이 높음.
  - **HTTP(S), TCP, TLS 트래픽을 처리**하며 **DDoS 공격** 완화 기능 제공.
  - 트래픽 **로드 밸런싱**과 구글 클라우드로의 트래픽 전달 기능 수행.
##### 주요 이점
1. **확장성과 신속성**
   - GFE와 백엔드 간의 **전역 로드 밸런싱**으로 데이터센터 장애 발생 시 트래픽을 빠르게 전환 가능.
   - **계층 분리**를 통해 각 계층을 독립적으로 **로드 밸런싱**, **수용량 추가**, **변경 적용**이 쉬움.

2. **과부하 완화**
   - GFE는 백엔드로 트래픽이 도달하기 전에 **과부하를 흡수**하거나 연결을 종료하는 **완충 지점** 역할.

3. **새로운 프로토콜 및 보안 요구사항 도입 용이**
   - **IPv6 연결 처리**: 일부 백엔드에서 지원하지 않아도 GFE에서 처리 가능.
   - **SSL 인증서 관리 간소화**:
     - 예: SSL 재교섭 취약점이 발견되었을 때, GFE의 **SSL 제한 기능**을 통해 백엔드를 보호.
   - **ALTS(애플리케이션 계층 전송 보안)** 도입으로 서비스 간 통신의 보안성 강화.
##### 현대적 아키텍처의 추가적 장점
1. **서비스 메시(Service Mesh)**
   - 데이터 플레인(요청 처리)과 제어 플레인(정책 및 설정 관리)으로 나뉜 구조.
   - 요청 처리와 관리 작업을 분리하여 **확장 가능**하고 **효율적인 보안 제어** 가능.

2. **개발자 지원**
   - RPC 라이브러리에 ALTS를 통합하여 개발자가 쉽게 자격 증명을 사용할 수 있도록 지원.

---

**결론**:  
구글의 프런트엔드 설계는 **마이크로서비스 아키텍처**와 **계층형 접근 방식**을 통해 **보안성**, **확장성**, **회복성**을 동시에 확보하였습니다. 이를 통해 대규모 트래픽 처리와 예상치 못한 상황에서도 안정성을 유지할 수 있음을 보여줍니다.


---

## 7.4 변화의 종류: 서로 다른 속도, 서로 다른 일정
변화는 심각성과 의존성에 따라 속도가 다릅니다.
- **단기적 변화**: 제로데이 취약점 대응.
  - **사례**: Shellshock 취약점 대응.
- **중기적 변화**: 보안 상태 개선.
  - **사례**: FIDO 보안 키를 이용한 투팩터 인증 도입.
- **장기적 변화**: 규제나 업계 변화에 따른 설계 변경.
  - **사례**: HTTPS 도입 증가.
    - ⭐️ **[그림 7-1]**: 플랫폼별 HTTPS 사용 증가 그래프.
    - ![[Pasted image 20241222083426.webp]]

#### 1. HTTPS 도입의 성공 사례
- HTTPS 사용률이 시간이 지남에 따라 크게 증가했음을 시각적으로 보여줌.
- **윈도우 크롬 사용자**: HTTPS 브라우징 시간이 약 **70% → 90% 이상**으로 증가.
- **안드로이드 크롬 사용자**: HTTPS 브라우징 시간이 약 **37% → 90% 이상**으로 증가.

#### 2. 장기적 변화의 효과를 데이터로 증명
- 구글 크롬 팀, Let's Encrypt, 웹 퍼블리셔 등 **여러 이해관계자의 협력**을 통해 웹 생태계 전반에서 HTTPS로의 전환이 성공적으로 이루어졌음을 입증.
- **데이터 기반 전략**이 보안 개선의 실제 성과를 보여줌.

#### 3. 생태계 변화의 주요 교훈
- 보안 개선이 **비즈니스 이익과 연계**될 때 조직의 참여가 더 적극적임.
- 업계와 협력하여 보안 표준을 개선하는 방식의 중요성을 시사.

**[그림 7-1]**은 장기적인 보안 변화를 효과적으로 구현하고 이를 평가하는 데 있어 **핵심 지표**와 **전략적 통찰**을 제공합니다.

---

## 7.5 분란: 계획이 변경될 때
변화 속도를 높이거나 늦춰야 할 경우에 대한 전략.
- **속도를 높이는 경우**: 취약점이 급속히 확산될 때.
- **속도를 늦추는 경우**: 테스트 실패나 롤아웃 문제 발생 시.

---

## 7.6 예시: 하트블리드 취약점 : 범위의 증가 - 하트블리드 (Heartbleed)

#### 사건 개요
- **2011년 겨울**, OpenSSL 프로젝트는 SSL/TLS의 하트비트(heartbeat) 기능을 추가하는 중 **버그**를 도입.
  - 이 버그는 서버나 클라이언트의 **비공개 메모리** 64KB에 접근할 수 있도록 허용함.
- **2014년 4월**, 구글의 닐 메타(Neel Mehta)와 Codenomicon 엔지니어들이 이 버그를 발견하여 OpenSSL 프로젝트에 보고.
- 공개 시 취약점에 대한 설명을 위해 **Heartbleed.com**과 같은 직관적인 이름과 로고를 사용, 예상치 못한 미디어 관심을 받음.

#### 구글의 대응
1. **사전 작업**
   - 구글은 엠바고 상태에서 취약점 패치를 일찍 확보하고 **TLS 트래픽 처리 시스템**과 **외부 노출된 핵심 시스템** 몇 개를 조용히 패치.
   - 하지만 내부적으로 이슈에 대해 알리지 않아 추가 작업이 필요했음.

2. **공개 이후 대응**
   - 취약점이 공개된 뒤 **Metasploit** 같은 도구를 통해 공격 가능성이 급증.
   - 구글 보안 팀은 다음 절차를 실행:
     1. **자동화된 스캐닝**으로 영향을 받는 시스템을 탐지.
     2. 각 시스템의 **패치 진행 상황을 추적**.
     3. 비공개 키 유출 가능성을 고려해 **모든 키 재설정 작업을 진행**.

3. **성과**
   - 보안 팀은 영향을 받는 시스템별로 조치를 취하고, 공유 스프레드시트를 통해 작업을 추적하여 효과적으로 대응.
   - 이슈 대응 과정에서 **보안 문화와 프로세스 강화**.

#### 얻은 교훈
1. **엠바고 상태와 일정 조정**
   - 최악의 상황을 대비한 계획이 필요.
   - 사전 작업을 최대한 수행하고 엠바고 상태의 취약점이라도 **영향도가 높은 시스템을 먼저 패치**.

2. **신속한 배포 준비**
   - 지속적 빌드 및 카나리 전략을 사용해 변경 사항을 신속히 배포하고 검증.

3. **키 로테이션과 암호 관리**
   - 정기적인 **키 로테이션**으로 유출 시 영향을 최소화.
   - 유출 시 빠르게 다른 키로 교체 가능.

4. **내부 및 외부 의사소통**
   - 변화가 실패하거나 예기치 않은 결과를 초래할 경우, 업데이트를 신속히 제공할 채널 확보.

---

**결론**:  
하트블리드 사건은 **보안 취약점 대응 프로세스**와 **조직 내 협업 체계**의 중요성을 보여줍니다. 또한, 정기적인 키 관리와 효율적인 의사소통이 장기적인 보안 유지에 필수적임을 강조합니다.


---

#### 용어 설명
- **엠바고 (Embargo)** : 취약점 공개 전 일정 기간 동안 정보를 제한하는 합의.
- **블루-그린 배포** : 프로덕션 환경에서 다운타임 없이 새로운 버전을 배포하는 전략.
- **제로데이 취약점 (Zero-Day Vulnerability)** : 패치가 존재하지 않는 상태에서 공격에 노출된 보안 취약점.
- **FIDO (Fast IDentity Online)** : 인터넷 보안 표준 기반의 하드웨어 보안 키 인증 기술.
- **컨테이너** : 애플리케이션과 필요한 라이브러리를 함께 패키징하여 독립적으로 실행 가능한 환경.
