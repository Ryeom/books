서비스 거부(Denial of Service, DoS) 공격의 원리, 방어 전략, 설계 원칙 및 완화 방법을 다룸. 이를 통해 시스템의 신뢰성을 유지하고 경제적 손실을 최소화하는 방법을 설명함.

## 1. 공격과 방어를 위한 전략
DoS 공격 방어의 시작점은 공격자의 전략을 이해하고, 방어자의 제한된 자원을 효율적으로 활용하는 데 있다.

### 공격자의 전략
- **목표**: 제한된 리소스로 시스템의 용량을 초과시키는 것.
- **공격 유형**:
  - 대량의 요청을 보내 네트워크와 서버를 과부하 상태로 만듦.
  - 응답 생성 비용이 큰 요청을 선택적으로 보냄.
  - 분산 서비스 거부(DDoS) 공격: 여러 머신을 이용해 대규모 봇넷이나 증폭 공격 실행.

### 방어자의 전략
- **목표**: 제한된 리소스를 활용해 효과적인 방어 구축.
- **우선순위**: 시스템 설계 단계에서 위협 모델을 기반으로 취약한 연결에 집중.
- **예시**:
  - 자동 스케일링으로 트래픽 확장.
  - 디펜던시 체인 분석을 통한 약점 강화.

---

## 2. 방어를 위한 설계
효율적인 방어는 계층적 방어(Layered Defense) 원칙을 따르며, 공유 인프라와 개별 서비스로 나뉩니다.

### 망 아키텍처
- **공유 방어 역량**: 네트워크 로드 밸런서, 엣지 라우터를 활용해 비용 절감 및 확장성 확보.
- **캐싱 프록시 활용**: 네트워크 엣지에서 정적 콘텐츠를 캐싱해 비용 절약 및 응답 지연 최소화.

### 방어형 서비스
- **캐싱 적용**: 동일한 요청이 애플리케이션 백엔드로 전달되지 않도록 함.
- **요청 최적화**: 불필요한 요청 제거 및 스프라이트 기법으로 리소스 사용 최소화.
- **대역폭 절약**: 이미지 크기 조정, 사용률 제한 적용.

---

## 3. 공격의 완화
DoS 공격은 적절한 방어 아키텍처와 시스템으로 완화할 수 있습니다.

### 모니터링과 알람
- **MTTD 및 MTTR 단축**: CPU, 메모리, 요청량 모니터링.
- **알람 최적화**: 자동 방어 장치가 작동 시 알람 전송.

### 우아한 퇴보
- **서비스 유지 전략**:
  - 읽기 전용 모드로 전환.
  - 중요하지 않은 기능 비활성화.
- **트래픽 우선순위 설정**: 중요도가 낮은 트래픽을 제한.

### DoS 완화 시스템
- **자동화 방어**: CAPTCHA, IP 쓰로틀링, 자바스크립트 챌린지.
- **장애 모드 고려**: 중앙식 컨트롤러가 실패 시 정적 정책 유지.

### 전략적 대응
- **공격 분석 방지**: 공격자의 역량 파악을 어렵게 만들어 지속적인 방어 유지.
- **예시**:
  - 공격 트래픽을 감지하면 CAPTCHA로 대응.
  - 변칙적인 요청을 필터링해 A/B 테스트 차단.

---

## 4. 자체 유발 공격에 대응하기
DoS와 비슷한 트래픽 급증은 종종 시스템 내부 문제로 발생.

### 사용자의 행위
- **예시**: 재난 상황에서 사용자 요청 급증.
- **해결책**: 네트워크 로드 밸런서를 활용해 트래픽 분산.

### 클라이언트의 재시도 행위
- **문제점**: 클라이언트가 동일 요청을 반복적으로 보내 시스템 과부하 발생.
- **해결책**:
  - 지터(Jitter) 적용: 각 클라이언트가 임의의 대기 시간 후 요청.

---

## 5. 마치며
- **DoS 방어의 중요성**: 모든 온라인 서비스는 DoS 대비 설계를 기본으로 해야 함.
- **경제적 효율성**: 비용 절감과 방어 역량 증대를 목표로 방어 시스템 설계.

---

#### 용어 설명
- **DoS (Denial of Service)**: 서비스 거부 공격. 특정 서비스의 가용성을 방해하려는 행위.
- **DDoS (Distributed Denial of Service)**: 분산 서비스 거부 공격. 다수의 머신을 활용한 대규모 DoS 공격.
- **증폭 공격**: 적은 요청으로 많은 응답 트래픽을 생성해 피해자를 공격.
- **지터(Jitter)**: 클라이언트 요청의 동시성을 방지하기 위해 대기 시간을 임의로 조정하는 방식.
- **캐싱 프록시**: 정적 콘텐츠를 저장해 서버로의 요청을 줄이는 중간 서버.

