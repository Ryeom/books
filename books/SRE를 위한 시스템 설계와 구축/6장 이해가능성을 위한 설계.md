## 1. 이해 가능성의 중요성
- 시스템 이해 가능성은 보안과 신뢰성의 핵심 요소.
- 이해 가능한 시스템은 **취약점 감소**, **효율적 장애 대응**, **보안 상태 확신**을 제공.
- **불변성**: 시스템의 환경이 변화해도 항상 참인 특성을 의미하며, 보안 및 신뢰성을 보장.

---

## 2. 주요 개념

### 2.1 시스템 불변성
- **정의**: 예상치 못한 상황에서도 참인 시스템의 특성.
- **예시**:
  - 인증받은 사용자만 민감 데이터에 접근 가능.
  - 부하가 높아도 연속적 장애를 방지.
  - 예상치 못한 입력에도 시스템이 안정적으로 작동.

### 2.2 멘털 모델
- 복잡한 시스템을 이해하기 위해 사용자가 구성하는 추상적 모델.
- 멘털 모델이 유효하려면 **예외적 상황**에서도 적용 가능해야 함.

---

## 3. 이해 가능한 시스템 설계

### 3.1 복잡성과 이해 가능성
- 복잡성은 자연스러운 현상이지만, **관리되지 않는 복잡성**은 이해 가능성을 감소시킴.
- 시스템을 작은 컴포넌트와 계층으로 분리하여 관리.

### 3.2 중앙 집중식 보안 및 신뢰성 관리
- 공통 작업(인증, 승인, 로깅 등)을 프레임워크로 중앙 집중화.
- **장점**:
  - 검토 및 유지보수 용이.
  - 보안 요구사항 구현 실패를 예방.

### 3.3 보안 경계
- **신뢰 컴퓨팅 기반(TCB)**: 보안 정책을 반드시 준수해야 하는 시스템 구성 요소.
- **예시**:
  - 모놀로식 시스템 대신 마이크로서비스로 분리해 보안 경계 설정.
  - 민감 데이터 접근을 엄격히 제한.

⭐️ **그림 6-3**: 마이크로서비스 아키텍처 설계에서 보안 경계를 나타냄.

---

## 4. 소프트웨어 구조화

### 4.1 애플리케이션 프레임워크
- 인증, 승인, 로깅 등 필수 기능을 포함한 고수준 프레임워크 활용.
- **장점**:
  - 개발자 작업 간소화.
  - 팀 간 공통 언어로 이해도 향상.

### 4.2 데이터 타입 활용
- **명시적 데이터 타입**을 사용해 불변성 보장.
- **예시**:
  - SQL 주입 방지를 위해 `SafeSQL` 타입 사용.
  - HTML 주입 방지를 위한 `SafeHTML` 타입 구현.
### **6.4.2 사례: 데이터 흐름 관리와 이해 가능성 - 구글의 접근 방식**

#### 배경
- 보안 속성 중 상당수는 시스템 내에서 **값의 검증**과 적절한 흐름에 의존.
- 잘못된 데이터 처리로 인해 발생하는 보안 취약점을 방지하기 위해 **구체적인 데이터 타입**과 **안전한 데이터 흐름 관리**가 중요.

#### 문제
- 예를 들어, 여러 웹 서비스가 **URL을 문자열로 표현**하여 다루는 경우, 해당 문자열의 유효성과 안전성에 대한 보장이 없음.
- 이로 인해 아래와 같은 문제가 발생:
  - 신뢰할 수 없는 입력값이 다운스트림 코드로 전달됨.
  - 입력값이 제대로 검증되지 않아 **SQL 주입**이나 **XSS 취약점** 발생 가능.

#### 해결 방안

##### 유효한 데이터 타입 도입
- 기본 문자열 대신 **유효한 URL을 표현하는 타입**을 사용.
- 해당 타입의 생성자는 모든 URL이 **유효한 형식**임을 보장.

##### 타입 계약 기반 검증
- 타입 생성 시 검증 및 계약(compliance)을 강제하여 안전성을 확보.
- 이 타입을 사용하는 모든 코드가 계약에 따라 동작하므로 **일관성과 안전성** 유지.

##### 보안과 이해 가능성 향상
- URL 타입의 동작만 이해하면 다운스트림 코드를 이해할 필요 없이 데이터를 안전하게 다룰 수 있음.
- 불필요한 검증과 코드 리뷰의 부담을 줄이고, 전체 시스템의 **이해 가능성**을 높임.

#### 사례 적용

##### SQL 주입 방지
- **SafeSQL** 타입의 SQL 쿼리 API는 문자열 대신 안전한 타입을 사용하여 주입 공격을 방지.
- 예를 들어, SQL 쿼리에 포함될 사용자 입력을 SafeSQL 타입으로 변환해 검증한 후 쿼리를 실행.

##### HTML XSS 방지
- **SafeHTML** 생성자는 신뢰할 수 없는 입력을 검증 및 처리하여 브라우저 내 DOM 주입 취약점을 방지.
- HTML 템플릿에서 자동으로 안전한 데이터만 렌더링되도록 보장.

#### 효과
- **검증된 타입 시스템**은 코드의 품질과 보안성을 동시에 향상.
- 보안 정책을 타입 수준에서 캡슐화하여 애플리케이션 전반에서 **안전한 데이터 흐름** 유지.
- 개발자는 복잡한 데이터 검증 로직을 신경 쓰지 않고 비즈니스 로직에만 집중 가능.

**결론**:  
구글은 **명시적인 데이터 타입**과 **계약 기반 검증**을 통해 데이터 흐름의 안전성을 보장하며, 복잡한 대규모 시스템에서도 **효율적이고 이해 가능한 설계**를 구현


⭐️ **예시**: 팅크(Tink) 암호화 프레임워크는 안전한 API를 제공하며 암호화 구현에서 흔한 실수를 방지.
![[Pasted image 20241222081846.webp]]

---

## 5. 결론
- 명확한 인터페이스와 불변성을 보장하는 설계를 통해 시스템 이해 가능성을 높일 수 있음.
- 보안 및 신뢰성 향상을 위해 **캡슐화된 타입**, **중앙 집중식 관리 프레임워크**, **TCB 분리** 등의 전략을 적용해야 함.

---

#### 용어 설명

- **불변성 (Immutability)**: 시스템이 어떤 상황에서도 참이어야 하는 특성.
- **멘털 모델 (Mental Model)**: 시스템 동작을 이해하기 위해 구성한 추상적 이해 구조.
- **신뢰 컴퓨팅 기반 (Trusted Computing Base, TCB)**: 보안 정책을 반드시 준수해야 하는 구성 요소.
- **멱등성 (Idempotence)**: 작업이 여러 번 실행되어도 결과가 동일한 특성.
- **SQL 주입 (SQL Injection)**: 악의적인 SQL 코드를 데이터베이스에 삽입하여 시스템을 공격하는 기법.
- **ALTS (Application Layer Transport Security)**: 구글에서 사용하는 자동화된 서비스 간 인증 및 보안 프로토콜.
- **EUC (End-User Context Ticket)**: 요청과 연관된 인증 데이터를 포함하는 티켓으로, 내부 서비스 인증에 사용.

