
이번 장은 **데이터베이스 신뢰성 엔지니어링(DBRE)**에 대한 내용을 SRE 관점에서 다루고 있다. 데이터베이스는 전통적으로 가장 위험에 취약한 시스템 계층이었으며, `DBA(DataBase Administrator)`의 역할이 **사일로(Silo)와 스노우플레이크(Snowflake)** 같은 비효율적인 관행을 낳았다고 지적한다. SRE 원칙을 데이터베이스 관리에 적용함으로써 이 문제를 해결하고, 데이터베이스를 `일류 시민`으로 격상시키는 방법을 제시한다.

#### **1. DBRE의 기본 지침**

- **데이터 보호:** 전통적인 DB 관리 방식은 엄격한 직무 분리, 수동 백업에 의존했다. 하지만 DBRE는 **자동화된 백업/복구 프로세스**, **표준화된 보안 정책**, **중복성** 등을 통해 협업을 촉진하고 신뢰성을 높인다.
- **확장 가능한 셀프서비스:** 재능 있는 DBRE는 희소하므로, 소수의 DBRE가 **셀프서비스 플랫폼**을 구축하고 표준을 제공하여 다른 엔지니어들이 데이터베이스 관련 작업을 스스로 처리하게 한다. DBRE의 역할은 직접 모니터링하고 관리하는 것이 아니라, 다른 사람에게 권한을 부여하고 안내하는 것이다.
- **데이터베이스는 특별하지 않다:** 데이터베이스를 `애완동물`처럼 특별하게 관리하는 대신, `가축`처럼 언제든 잃어버릴 수 있고 효율적으로 교체 가능한 **표준화된 컴포넌트**로 취급해야 한다.

#### **2. 데이터 복구 전략의 네 가지 구성 요소**

- **감지(Detection):** 데이터 손실이나 손상을 **조기에 발견**하는 것이 가장 중요하다. 이를 위해 스크립트나 API를 이용한 자동화된 변경 프로세스를 구축하고, 모든 변경 사항을 추적 가능하도록 로깅해야 한다.
- **다양한 저장 공간:** 복구 시나리오와 비용에 따라 **온라인/오프라인/오브젝트 저장소** 등 다양한 저장 매체를 활용하여 데이터 복제본을 분산 보관한다.
- **다양한 툴박스:** `물리적`, `논리적`, `증분` 백업 등 다양한 종류의 백업 방식을 활용하여 복구의 유연성을 확보한다.
- **테스트:** 백업 파일이 제대로 작동하는지 확인하는 **복구 테스트**를 일상적인 프로세스에 통합하여 지속적으로 수행한다. 이는 복구 시간을 예측하고 개선하는 데 필수적이다.

#### **3. 지속적 전달(Continuous Delivery)과 DBRE**

- **DBA의 병목 현상 해소:** 전통적인 `DBA`는 데이터베이스 변경을 승인하는 **게이트키퍼** 역할을 수행하여 개발 속도의 병목이 되었다. DBRE는 **자동화된 툴링과 교육, 협업**을 통해 개발자가 직접 데이터베이스 변경을 안전하게 처리하도록 돕는다.
- **배포 및 마이그레이션:** 데이터베이스 변경 사항에 **버전 관리**를 적용하고, 마이그레이션 시 영향을 분석하며, **롤백 스크립트**를 테스트하는 등 안전하고 예측 가능한 배포 프로세스를 구축한다. 이를 통해 데이터베이스 변경이 CI/CD 파이프라인의 자연스러운 일부가 되도록 만든다.

---

### **주요 용어 정리**

- **DBRE(DataBase Reliability Engineer):** SRE의 원칙을 데이터베이스 관리에 적용하는 역할. 데이터베이스를 자동화, 표준화, 복원력을 갖춘 `일류 시민`으로 만들기 위해 노력한다.
- **DBA(DataBase Administrator):** 데이터베이스 시스템을 관리하고 유지보수하는 전통적인 역할.
- **사일로(Silo):** 조직 내에서 팀 간 소통이 단절되어 각자 독립적으로 일하는 비효율적인 문화.
- **스노우플레이크(Snowflake):** 모든 서버가 수동으로 설정되어 고유한 특성을 가지는, 일관성 없는 인프라 환경. 재현이나 자동화가 어렵다.
- **애완동물 vs. 가축(Pet vs. Cattle):** 서버를 관리하는 두 가지 비유. `애완동물(Pet)`은 각각의 서버를 특별하게 여기고 문제가 생기면 고쳐주는 방식이고, `가축(Cattle)`은 서버를 동일한 컴포넌트로 간주하고 문제가 생기면 교체하는 방식이다. DBRE는 데이터베이스도 `가축`처럼 다루어야 한다고 주장한다.
- **복구 부채(Recovery Debt):** 백업이 만료되었거나 복구 테스트가 이루어지지 않는 등, 미래에 데이터 손실 위험을 초래하는 숨겨진 부채.
- **지속적 전달(Continuous Delivery, CD):** 소프트웨어가 항상 신뢰성 있게 배포될 수 있는 상태를 유지하는 방법론. DBRE는 데이터베이스 변경을 이 파이프라인에 통합한다.
- **게이트키퍼(Gatekeeper):** 특정 팀의 작업을 승인하거나 거부하는 역할을 하는 사람이나 팀. DBRE는 게이트키퍼가 아닌, **교육자와 멘토** 역할을 한다.